name: t2p
on: workflow_dispatch
jobs:
  c:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - run: sudo apt-get update && sudo apt-get install -y pandoc wkhtmltopdf
      - run: |
          mkdir -p pdf
          for f in $(find . -name "*.txt" -type f); do
            b="${f%.txt}"
            o="pdf/${b#./}.pdf"
            mkdir -p "$(dirname "$o")"
            pandoc "$f" -o "$o" --pdf-engine=wkhtmltopdf || echo "FAILED: $f"
          done
